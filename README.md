# 臺東縣消防局防災館預約系統

這是一個智慧化的防災館預約與志工媒合平台。

## 系統核心流程

下方是使用者從預約到收到通知的完整互動流程圖。

```mermaid
sequenceDiagram
    autonumber
    
    %% 使用別名 (Alias) 縮短參與者名稱
    actor User as 民眾
    participant FE as 前端網頁
    participant BE as 後端伺erver
    actor Admin as 管理者
    actor Volunteer as 被指派的志工

    %% --- 流程一：民眾提交預約 ---
    User->>FE: 填寫預約表單並點擊送出
    FE->>BE: POST /api/reservations (傳送表單資料)
    Note right of BE: - 儲存案件資料<br>- 狀態設為「待審核」
    BE-->>FE: 回應「申請已提交」
    BE->>Admin: [非同步] 發送 LINE & Email 「新案件通知」

    %% --- 流程二：管理者審核與指派 ---
    Admin->>BE: GET /api/admin/reservations/{id} (查看案件詳情)
    BE-->>Admin: 回傳案件詳情 & 系統自動推薦的5位志工
    
    Admin->>BE: PUT /api/admin/reservations/{id}/approve (送出最終指派的志工名單)
    Note right of BE: - 驗證權限<br>- 更新案件狀態為「已確認」<br>- 綁定指派的志工<br>- 更新該時段為「已額滿」
    BE-->>Admin: 回應「審核成功」

    %% --- 流程三：系統自動化通知 ---
    BE->>User: [非同步] 發送 Email 「預約成功通知」
    BE->>Volunteer: [非同步] 發送 LINE 「新任務通知」
```

## 功能規格

本專案主要分為三大使用者端，各自擁有獨立的核心功能：

### 👨‍👩‍👧‍👦 民眾端功能 (Public-Facing)
- **互動式預約日曆**: 訪客可透過視覺化月曆，清楚查看可預約、已額滿及休館日期。
- **線上預約表單**: 訪客可填寫聯絡資訊、參觀人數、年齡層等，快速完成線上預約。
- **自動化 Email 通知**: 在預約提交後、審核成功後及參訪前，系統會自動寄送通知信件，確保資訊不漏接。

### 🙌 志工端功能 (Volunteer Portal)
- **志工儀表板**: 志工登入後可查看即將到來的導覽任務與個人化資訊。
- **班表管理系統**: 提供視覺化月曆，讓志工能輕鬆點選、更新自己可提供服務的時段。
- **服務時數統計**: 系統會自動累計並顯示服務時數，方便志工隨時查詢。
- **LINE 任務通知**: 當有新的導覽任務被指派時，系統會透過 LINE Bot 即時推播通知給志工。

### ⚙️ 管理員後台功能 (Admin Dashboard)
- **預約案件儀表板**: 集中管理所有預約案件，並可依狀態（待審核、已確認等）進行篩選與查詢。
- **智慧志工媒合**: 系統會根據預約的時段，從班表中自動推薦可服務的志工名單。
- **手動指派與管理**: 管理員保有最終決定權，可手動調整、指派或取消志工的任務。
- **志工資料管理**: 統一管理所有志工的個人檔案與歷史服務紀錄。
